<?php/** * A script for reading the source of NocturnalGaming. * * @packageNGaming */ class CCSource extends CObject implements IController{	public function __construct()	{		parent::__construct();	}		public function Index()	{		$args = func_get_args();		$path = "";		foreach($args as $arg)		{			$path.=$arg.'/';		}		$source = new CMSource();		$this->views->SetTitle("Source navigation");		$this->views->AddView('source/index.tpl.php',			array(				'fd'		=> $source->ReadDir($path),				'directory'	=> $path,				),			'primary'			);		$this->views->AddView('source/index.sidebar.tpl.php', array(), 'sidebar');	}		public function View($path=null)	{		$args = func_get_args();		$path = "";		foreach($args as $arg)		{			$path.=$arg.'/';		}		$path = substr($path, 0, -1);		$model = new CMSource();		$pathName = dirname($path);		$pathName = ($pathName=="." || $pathName=="\\" || $pathName=="/")?"/":$pathName.'/';		$this->views->SetTitle('Source code');				$file = $model->ReadFile($path);		$this->views->AddView('source/view.tpl.php',			array(				'filename'	=> $path,				'file'		=> $file,				),			'primary'			);		$this->views->AddView('source/view.sidebar.tpl.php',			array(				'dirs' => $model->ReadDir($pathName),				),			'sidebar');	}}